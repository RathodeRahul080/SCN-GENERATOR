<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SCN Generator - Minimal Input</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/docx/7.7.0/docx.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 900px; margin: auto; }
    label, input, textarea, select, button { display: block; width: 100%; margin-top: 10px; padding: 8px; }
    button { width: auto; }
    #preview { display: none; background: #f4f4f4; padding: 20px; margin-top: 20px; }
  </style>
</head>
<body>
<h2>SCN Generator (Minimal Input)</h2>

<label>Subject of SCN</label>
<input type="text" id="subject">

<label>Taxpayer Name</label>
<input type="text" id="taxpayerName">

<label>GSTIN</label>
<input type="text" id="gstin">

<label>Address</label>
<textarea id="address"></textarea>

<label>Tax Period</label>
<input type="text" id="taxPeriod">

<label>IGST Amount</label>
<input type="number" id="igst" oninput="autoFillTax()">

<label>CGST Amount</label>
<input type="number" id="cgst" oninput="calculateTotal()">

<label>SGST Amount</label>
<input type="number" id="sgst" oninput="calculateTotal()">

<label>Cess</label>
<input type="number" id="cess" oninput="calculateTotal()">

<label>Total Tax Amount</label>
<input type="number" id="totalTax" readonly>

<label>Select Legal Provision</label>
<select id="legalSelect" onchange="showLegalText()">
  <option value="">-- Select --</option>
  <option value="59">Section 59 - Self-assessment</option>
  <option value="9">Section 9 - Levy and Collection</option>
  <option value="50">Section 50 - Interest</option>
  <option value="74">Section 74 - Fraud</option>
  <option value="122">Section 122(2)(b) - Penalty</option>
</select>
<p id="legalText"></p>

<button onclick="generatePreview()">Generate Preview</button>
<button onclick="downloadDocx()">Download Word</button>
<button onclick="exportPDF()">Download PDF</button>
<button onclick="previewPDF()">Preview PDF</button>

<div id="preview"></div>

<script>
function autoFillTax() {
  document.getElementById("cgst").value = 0;
  document.getElementById("sgst").value = 0;
  calculateTotal();
}

function calculateTotal() {
  const cgst = parseFloat(document.getElementById("cgst").value) || 0;
  const sgst = parseFloat(document.getElementById("sgst").value) || 0;
  const igst = parseFloat(document.getElementById("igst").value) || 0;
  const cess = parseFloat(document.getElementById("cess").value) || 0;
  const total = cgst + sgst + igst + cess;
  document.getElementById("totalTax").value = total.toFixed(2);
}

function showLegalText() {
  const val = document.getElementById("legalSelect").value;
  const text = {
    "59": "Every registered person shall self-assess the taxes payable under this Act and furnish a return for each tax period.",
    "9": "There shall be levied a tax called the Central Goods and Services Tax on all intra-state supplies.",
    "50": "Interest shall be payable on any tax not paid within the prescribed period.",
    "74": "Deals with tax not paid or short paid by reason of fraud or willful misstatement.",
    "122": "Penalty equal to the tax due shall be levied in case of evasion." 
  };
  document.getElementById("legalText").innerText = text[val] || "";
}

function generatePreview() {
  const name = document.getElementById("taxpayerName").value;
  const gstin = document.getElementById("gstin").value;
  const address = document.getElementById("address").value;
  const period = document.getElementById("taxPeriod").value;
  const total = document.getElementById("totalTax").value;
  const legal = document.getElementById("legalText").innerText;

  const html = `
    <h3>Show Cause Notice</h3>
    <p><strong>Subject:</strong> ${document.getElementById("subject").value}</p>
    <p><strong>1. Taxpayer Details:</strong> M/s ${name}, registered under GSTIN ${gstin}, located at ${address}.</p>
    <p><strong>2. Issue:</strong> Non-payment of tax for the period ${period}.</p>
    <p><strong>3. Liability:</strong> Total tax liability is â‚¹${total} including applicable components.</p>
    <p><strong>4. Legal Provisions:</strong> ${legal}</p>
    <p><strong>5. Show Cause:</strong> You are hereby directed to show cause within 30 days why the above mentioned tax liability should not be recovered under relevant provisions.</p>
  `;

  document.getElementById("preview").innerHTML = html;
  document.getElementById("preview").style.display = "block";
}
</script>

<script>
// downloadDocx, exportPDF, previewPDF functions remain here
</script>

</body>
</html>
